(define-module (riscv instruction rv64_c)
  #:use-module (riscv build-base)
  #:use-module (riscv range-base)
  #:export (c.ld c.sd c.addiw c.srli c.srai c.subw c.addw c.slli c.ldsp c.sdsp)
)

(define c.ld (make-instruction rd_p rs1_p c_uimm8 (range-fixed 1 0 0) (range-fixed 15 13 3)))
(define c.sd (make-instruction rs1_p rs2_p c_uimm8 (range-fixed 1 0 0) (range-fixed 15 13 7)))
(define c.addiw (make-instruction rd_rs1_n0 c_imm6 (range-fixed 1 0 1) (range-fixed 15 13 1)))
(define c.srli (make-instruction rd_rs1_p c_nzuimm6 (range-fixed 1 0 1) (range-fixed 15 13 4) (range-fixed 11 10 0)))
(define c.srai (make-instruction rd_rs1_p c_nzuimm6 (range-fixed 1 0 1) (range-fixed 15 13 4) (range-fixed 11 10 1)))
(define c.subw (make-instruction rd_rs1_p rs2_p (range-fixed 1 0 1) (range-fixed 15 13 4) (range-fixed 12 10 #f) (range-fixed 6 5 0)))
(define c.addw (make-instruction rd_rs1_p rs2_p (range-fixed 1 0 1) (range-fixed 15 13 4) (range-fixed 12 10 #f) (range-fixed 6 5 1)))
(define c.slli (make-instruction rd_rs1_n0 c_nzuimm6 (range-fixed 1 0 2) (range-fixed 15 13 0)))
(define c.ldsp (make-instruction rd_n0 c_uimm9sp (range-fixed 1 0 2) (range-fixed 15 13 3)))
(define c.sdsp (make-instruction c_rs2 c_uimm9sp_s (range-fixed 1 0 2) (range-fixed 15 13 7)))
